# 要件定義書 - KUYOU（黒歴史供養プラットフォーム）

## 1. 目的

本アプリケーションは、誰もが持つ「黒歴史」を匿名で共有し、ユーザーコミュニティの知恵と共感によって、恥ずかしい思い出を楽しい記憶に昇華させることを目的とする。失敗体験を通じて人々をつなぎ、癒しと笑いを提供するプラットフォームを構築する。

## 2. 機能要件

### 2.1 必須機能

- [ ] **匿名投稿機能（懺悔の間）**
  - 完全匿名での黒歴史投稿
  - カテゴリ選択（恋愛、中二病、SNS、学校生活、家族など）
  - 感情タグ付け（#赤面レベルMAX、#時を戻したい、#むしろ誇り、#誰か助けて）
  - お札/経典風デザインでのカード表示

- [ ] **タイムライン機能（供養の広場）**
  - 投稿された黒歴史カードの一覧表示
  - カテゴリ別フィルタリング
  - 人気順ソート機能
  - 詳細表示機能

- [ ] **供養機能（いいね）**
  - 木魚アイコンの供養ボタン
  - タップ時の効果音再生（ポクポク音）
  - 供養数のカウント表示
  - 投稿者への徳ポイント付与

- [ ] **リライト案投稿機能（智慧の泉）**
  - 黒歴史へのコメント投稿
  - リライト案の方向性選択（爆笑ルート、感動ルート、真理ルート）
  - リライト案への評価機能

- [ ] **ベストアンサー選定機能（成仏）**
  - 投稿者によるベストアンサー選択
  - 成仏エフェクトの表示
  - ベストアンサー投稿者への徳ポイント付与

- [ ] **徳ポイントシステム**
  - ポイントの獲得・蓄積
  - ユーザープロファイルでのポイント表示

### 2.2 オプション機能

- [ ] 投稿の通報・ブロック機能
- [ ] 徳ポイントランキング
- [ ] 月間/週間人気黒歴史ランキング
- [ ] プッシュ通知（自分の投稿への反応通知）
- [ ] シェア機能（SNSへの共有）
- [ ] アチーブメント/バッジシステム

## 3. 非機能要件

### 3.1 パフォーマンス

- タイムライン読み込み時間：3秒以内
- 投稿処理の完了時間：2秒以内
- スムーズなスクロール体験（60fps維持）
- オフライン時のキャッシュ機能

### 3.2 セキュリティ

- 完全匿名性の保証（IPアドレス等の非保存）
- 不適切コンテンツの自動検出・フィルタリング
- SSL/TLS通信の暗号化
- プライバシーポリシーの明示

### 3.3 保守性

- SwiftUIによるモジュラー設計
- MVVMアーキテクチャの採用
- コードドキュメントの整備
- ユニットテストカバレッジ60%以上

### 3.4 互換性

- iOS 15.0以上対応
- iPhone/iPad両対応（ユニバーサルアプリ）
- ダークモード対応
- Dynamic Type対応（アクセシビリティ）

## 4. 制約事項

### 4.1 技術的制約

- SwiftUI/Swiftでの開発
- Xcodeプロジェクトとして管理
- 初期段階では外部ライブラリの使用を最小限に
- ハッカソン期間内での実装を考慮したスコープ

### 4.2 ビジネス制約

- SPAJAM 2025ハッカソン向けのプロトタイプ開発
- 2日間での実装可能な範囲に限定
- 無料アプリとしてリリース（初期段階）

## 5. 成功基準

### 5.1 完了の定義

- [ ] 匿名で黒歴史を投稿できる
- [ ] 投稿された黒歴史を閲覧できる
- [ ] 供養ボタンで反応でき、効果音が鳴る
- [ ] リライト案を投稿できる
- [ ] ベストアンサーを選択でき、成仏演出が表示される
- [ ] 徳ポイントが正しく計算・表示される
- [ ] 基本的なUIが直感的で使いやすい

### 5.2 受け入れテスト

- デモ環境で5人以上のテストユーザーが問題なく基本フローを完了できる
- 投稿から成仏までの一連の流れがスムーズに動作する
- ユーザーが「楽しい」「癒される」と感じる体験を提供できる

## 6. 想定されるリスク

- **技術的リスク**
  - 効果音再生の実装難易度
  - アニメーション実装の工数超過
  - *対策*：段階的な実装、MVP優先

- **コンテンツリスク**
  - 不適切な投稿への対処
  - *対策*：NGワードフィルター、通報機能の早期実装

- **スケジュールリスク**
  - ハッカソン期間内での完成度
  - *対策*：コア機能の優先実装、段階的リリース

## 7. 今後の検討事項

- データベース設計（ローカル/クラウド）
- API設計（将来的なバックエンド連携）
- 詳細なUI/UXデザイン
- 効果音・アニメーションの具体的な演出
- マネタイズ戦略（将来的な広告、プレミアム機能）
- コミュニティガイドラインの策定