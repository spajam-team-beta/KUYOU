# タスクリスト - KUYOU (黒歴史供養プラットフォーム)

## 概要

- 総タスク数: 28
- 推定作業時間: 2日間（ハッカソン期間）
- 優先度: 高（MVP必須機能の実装）

## タスク一覧

### Phase 1: 環境構築・基盤整備（4時間）

#### Task 1.1: Backend開発環境構築

- [ ] Dockerfileの作成・設定
- [ ] docker-compose.ymlの設定（Rails, MySQL, Nginx, Swagger）
- [ ] Gemfileの設定（必要なGemの追加）
- [ ] Rails APIモードの初期設定
- **完了条件**: `docker-compose up`でRails APIが起動する
- **依存**: なし
- **推定時間**: 1時間

#### Task 1.2: データベース設計・マイグレーション

- [ ] users テーブルのマイグレーション作成
- [ ] posts テーブルのマイグレーション作成
- [ ] replies テーブルのマイグレーション作成
- [ ] sympathies テーブルのマイグレーション作成
- [ ] インデックスの設定
- **完了条件**: `rails db:migrate`が成功し、全テーブルが作成される
- **依存**: Task 1.1
- **推定時間**: 1時間

#### Task 1.3: 基本モデルの作成

- [ ] User モデルの作成（devise設定含む）
- [ ] Post モデルの作成
- [ ] Reply モデルの作成
- [ ] Sympathy モデルの作成
- [ ] アソシエーションの設定
- [ ] バリデーションの設定
- **完了条件**: モデル間のリレーションが正しく動作する
- **依存**: Task 1.2
- **推定時間**: 1時間

#### Task 1.4: iOS開発環境構築

- [ ] Xcodeプロジェクトの初期設定
- [ ] SwiftUIベースの構成確認
- [ ] 必要なSwift Packageの追加
- [ ] プロジェクト構造の整理（Views, ViewModels, Services）
- **完了条件**: iOSシミュレータでアプリが起動する
- **依存**: なし
- **推定時間**: 1時間

### Phase 2: Backend API実装（8時間）

#### Task 2.1: 認証API実装

- [ ] Auth::RegisterService の実装
- [ ] Auth::LoginService の実装
- [ ] JWT認証の設定（devise-jwt）
- [ ] 認証コントローラーの実装
- [ ] 認証APIのテスト作成
- **完了条件**: ユーザー登録・ログインがAPIで動作する
- **依存**: Task 1.3
- **推定時間**: 2時間

#### Task 2.2: 投稿API実装

- [ ] Posts::CreateService の実装
- [ ] Utils::NicknameGenerator の実装
- [ ] PostsController の実装（index, create, show）
- [ ] カテゴリフィルタリング機能
- [ ] ページネーション実装
- [ ] 投稿APIのテスト作成
- **完了条件**: 投稿の作成・取得が正しく動作する
- **依存**: Task 2.1
- **推定時間**: 2時間

#### Task 2.3: 供養API実装

- [ ] Sympathies::CreateService の実装
- [ ] 供養の重複チェック機能
- [ ] 供養数のカウンター更新
- [ ] SympathiesController の実装
- [ ] 供養APIのテスト作成
- **完了条件**: 供養機能が正しく動作し、重複防止される
- **依存**: Task 2.2
- **推定時間**: 1.5時間

#### Task 2.4: リライト案API実装

- [ ] Replies::CreateService の実装
- [ ] Replies::SelectBestService の実装
- [ ] RepliesController の実装
- [ ] ベストアンサー選択機能
- [ ] リライト案APIのテスト作成
- **完了条件**: リライト案の投稿とベストアンサー選択が動作する
- **依存**: Task 2.2
- **推定時間**: 1.5時間

#### Task 2.5: 徳ポイントシステム実装

- [ ] Points::CalculateService の実装
- [ ] ポイント付与ルールの実装
- [ ] ユーザーポイント集計機能
- [ ] ランキング機能の実装
- **完了条件**: 各アクションでポイントが正しく付与される
- **依存**: Task 2.1, 2.2, 2.3, 2.4
- **推定時間**: 1時間

### Phase 3: iOS App実装（12時間）

#### Task 3.1: 認証画面実装

- [ ] LoginView の実装
- [ ] RegisterView の実装
- [ ] AuthViewModel の実装
- [ ] AuthService の実装（API連携）
- [ ] KeychainHelper の実装（トークン保存）
- **完了条件**: ユーザー登録・ログインが動作する
- **依存**: Task 2.1
- **推定時間**: 2時間

#### Task 3.2: タイムライン画面実装

- [ ] TimelineView の実装
- [ ] PostCardView の実装
- [ ] TimelineViewModel の実装
- [ ] APIService の基盤実装
- [ ] 無限スクロール実装
- [ ] カテゴリフィルター実装
- **完了条件**: 投稿一覧が表示され、スクロールが動作する
- **依存**: Task 3.1, Task 2.2
- **推定時間**: 3時間

#### Task 3.3: 投稿画面実装

- [ ] PostCreateView の実装
- [ ] PostViewModel の実装
- [ ] カテゴリ選択UI
- [ ] 文字数カウンター実装
- [ ] 下書き保存機能
- **完了条件**: 黒歴史の投稿ができる
- **依存**: Task 3.1, Task 2.2
- **推定時間**: 2時間

#### Task 3.4: 投稿詳細画面実装

- [ ] PostDetailView の実装
- [ ] ReplyListView の実装
- [ ] 供養ボタンの実装
- [ ] 木魚音の再生機能（SoundService）
- [ ] リライト案投稿UI
- [ ] ベストアンサー選択UI
- **完了条件**: 投稿詳細表示とインタラクションが動作する
- **依存**: Task 3.2, Task 2.3, 2.4
- **推定時間**: 3時間

#### Task 3.5: プロフィール画面実装

- [ ] ProfileView の実装
- [ ] 徳ポイント表示
- [ ] ポイント履歴表示
- [ ] ランキング表示
- [ ] ProfileViewModel の実装
- **完了条件**: ユーザー情報とポイントが表示される
- **依存**: Task 3.1, Task 2.5
- **推定時間**: 2時間

### Phase 4: 統合テスト・仕上げ（4時間）

#### Task 4.1: E2Eテスト実施

- [ ] ユーザー登録〜投稿までのフロー確認
- [ ] 供養機能の動作確認
- [ ] リライト案〜成仏までのフロー確認
- [ ] エラーハンドリングの確認
- [ ] 複数ユーザーでの動作確認
- **完了条件**: 全機能が正常に動作する
- **依存**: 全Phase 3タスク
- **推定時間**: 2時間

#### Task 4.2: UI/UXブラッシュアップ

- [ ] アニメーション追加（供養時など）
- [ ] エラーメッセージの改善
- [ ] ローディング表示の追加
- [ ] アクセシビリティ対応
- **完了条件**: ユーザー体験が滑らかになる
- **依存**: Task 4.1
- **推定時間**: 1時間

#### Task 4.3: ドキュメント整備

- [ ] APIドキュメント（Swagger）の作成
- [ ] READMEの更新
- [ ] デモ用データの準備
- [ ] 環境構築手順書の作成
- **完了条件**: 第三者が環境構築できる状態
- **依存**: Task 4.1
- **推定時間**: 1時間

## 実装順序

### Day 1（1日目）
1. **午前**: Phase 1 完了（Backend/iOS並行作業）
2. **午後**: Phase 2 開始（Backend APIを優先実装）
3. **夕方**: Phase 3 開始（認証・タイムライン画面）

### Day 2（2日目）
1. **午前**: Phase 3 継続（残りの画面実装）
2. **午後**: Phase 4（統合テスト・仕上げ）
3. **夕方**: 最終調整・デモ準備

## 並行実行可能タスク

- Task 1.1〜1.3（Backend）と Task 1.4（iOS）は並行実行可能
- Phase 2の各API実装は依存関係に注意しながら並行実行可能
- Phase 3の画面実装は、対応するAPIが完成次第並行実行可能

## リスクと対策

- **API連携の遅延**: Backend APIの実装を優先し、iOSはモックデータで開発開始
- **認証実装の複雑性**: devise-jwtの設定に時間がかかる場合は、簡易実装で進める
- **時間不足**: 下書き保存機能など、優先度の低い機能は後回しにする
- **不適切コンテンツ対策**: MVP段階ではNGワードフィルタのみ実装

## 注意事項

- 各タスクはコミット単位で完結させる
- APIの実装が完了したら即座にiOS側に共有
- エラーハンドリングは最初から実装する
- 不明点は実装前に確認する
- 定期的に進捗を共有する

## 実装開始ガイド

1. このタスクリストに従って順次実装を進めてください
2. 各タスクの開始時にTodoWriteでin_progressに更新
3. 完了時はcompletedに更新
4. 問題発生時は速やかに報告してください
5. Backend/iOS開発者で作業を分担し、効率的に進めてください